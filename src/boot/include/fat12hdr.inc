; ======================================================================================================================
; ----------------------------------------------------------------------------------------------------------------------
; 定义一些常量
; bpb开头的域属于BPB(BIOS Parameter Block), bs开头的域属于BS(Boot Sector, 引导扇区)
; ======================================================================================================================


; ======================================================================================================================
; ----------------------------------------------------------------------------------------------------------------------
; FAT12 磁盘的头,启动盘使用FAT12文件系统,FAT12比较简单,且可以为后边的文件系统学习打下基础
; ----------------------------------------------------------------------------------------------------------------------
bsOEMName       DB '---xx---'       ; 厂商名, 必须 8 个字节

bpbBytsPerSec   DW 512              ; 每扇区字节数
bpbSecPerClus   DB 1                ; 每簇多少扇区
bpbRsvdSecCnt   DW 1                ; Boot 记录占用多少扇区
bpbNumFATs      DB 2                ; 共有多少 FAT 表
bpbRootEntCnt   DW 224              ; 根目录文件数最大值
bpbTotSec16     DW 2880             ; 逻辑扇区总数
bpbMedia        DB 0xF0             ; 媒体描述符
bpbFATSz16      DW 9                ; 每FAT扇区数
bpbSecPerTrk    DW 18               ; 每磁道扇区数
bpbNumHeads     DW 2                ; 磁头数(面数)
bpbHiddSec      DD 0                ; 隐藏扇区数
bpbTotSec32     DD 0                ; 如果 wTotalSectorCount 是 0 由这个值记录扇区数

bsDrvNum        DB 0                ; 中断 13 的驱动器号
bsReserved1     DB 0                ; 未使用
bsBootSig       DB 29h              ; 扩展引导标记 (29h)
bsVolID         DD 0                ; 卷序列号
bsVolLab        DB '    AOS    '    ; 卷标, 必须 11 个字节
bsFileSysType   DB 'FAT12   '       ; 文件系统类型, 必须 8个字节
; ======================================================================================================================


; ======================================================================================================================
; ----------------------------------------------------------------------------------------------------------------------
; 基于 FAT12 头的一些常量定义，如果头信息改变，下面的常量可能也要做相应改变，扇区下标还是从0开始
; ----------------------------------------------------------------------------------------------------------------------
FATSz			equ	9   ; 同bpbFATSz16，每个FAT表占用扇区数

; 根目录占用空间，RootDirSectors = ((bpbRootEntCnt*32)+(bpbBytsPerSec–1))/bpbBytsPerSec，这样是为了保证此公式在根目录区无法
; 填满整数各扇区时，仍然成立。
; 在本系统中，直接定为占用14个扇区，故定义此宏
RootDirSectors		      equ	14

; Root Directory 的第一个扇区号	= bpbRsvdSecCnt + (bpbNumFATs; FATSz)
SectorNoOfRootDirectory	equ	19

; FAT1 的第一个扇区号	= bpbRsvdSecCnt
SectorNoOfFAT1		      equ	1

; DeltaSectorNo = bpbRsvdSecCnt + (bpbNumFATs; FATSz) - 2
; 文件的开始Sector号 = DirEntry中的开始簇号 + 根目录占用Sector数目 + DeltaSectorNo
; 这里定义为17，是因为根目录开始于第19个扇区，而数据区第一个簇的簇号开始于2(0,1两个FAT项始终不用)
DeltaSectorNo		        equ	17
; ======================================================================================================================
